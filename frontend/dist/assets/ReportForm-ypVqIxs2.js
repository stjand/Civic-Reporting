import{r as l,j as e,u as ae,R as M}from"./index-B56o66qZ.js";import{L as p,C as ne,T as oe,a as le,D as ie,E as ce,X as L,P as de,b as me}from"./leaflet-y9bmtEzs.js";import{M as D,C as ue}from"./map-pin-BzqeEGVC.js";import{L as Y,A as xe}from"./loader-circle-DWzTvnlX.js";import{S as he}from"./shield-Cm_pqdYJ.js";import{C as pe}from"./camera-DMqodexY.js";import{c as w}from"./createLucideIcon-CpBPnihH.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],be=w("maximize-2",ge);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],ye=w("mic-off",fe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],T=w("mic",je);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ve=w("minimize-2",Ne);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ke=w("upload",we);delete p.Icon.Default.prototype._getIconUrl;p.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Re=({onLocationSelect:c,initialLocation:o=null,isFullscreen:a=!1})=>{const d=l.useRef(null),s=l.useRef(null),i=l.useRef(null),[k,y]=l.useState(!0),[x,g]=l.useState(null);return l.useEffect(()=>{if(!(!d.current||s.current)){try{const n=p.map(d.current).setView([12.9716,77.5946],13);s.current=n,p.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(n);const b=p.divIcon({className:"custom-div-icon",html:`<div class="w-8 h-8 bg-blue-600 rounded-full border-4 border-white shadow-lg ${a?"animate-pulse":""}"></div>`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-12]});if(n.on("click",h=>{const{lat:j,lng:f}=h.latlng;i.current&&n.removeLayer(i.current);const N=p.marker([j,f],{icon:b}).addTo(n);i.current=N,c({lat:j,lng:f})}),o){const h=p.marker([o.lat,o.lng],{icon:b}).addTo(n);i.current=h,n.setView([o.lat,o.lng],15)}y(!1)}catch(n){console.error("Error initializing map:",n),g("Failed to load map"),y(!1)}return()=>{s.current&&(s.current.remove(),s.current=null)}}},[c,o,a]),l.useEffect(()=>{s.current&&setTimeout(()=>{s.current.invalidateSize()},100)},[a]),x?e.jsx("div",{className:`w-full ${a?"h-full":"h-96"} bg-gray-100 rounded-lg flex items-center justify-center`,children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Unable to load map"}),e.jsx("p",{className:"text-sm",children:x})]})}):e.jsxs("div",{className:`relative ${a?"h-full":""}`,children:[k&&e.jsx("div",{className:`absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center z-10 ${a?"h-full":""}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),e.jsx("div",{ref:d,className:`w-full rounded-lg border border-gray-200 shadow-sm ${a?"h-full":"h-96"}`,style:{minHeight:a?"100%":"384px"}}),e.jsx("div",{className:`${a?"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white px-4 py-2 rounded-full shadow-lg":"mt-2"} text-xs text-gray-500 text-center`,children:a?"ðŸ“ Tap anywhere on the map to set location":"Click on the map to select location"})]})},_="https://civic-reporting-jsfz.onrender.com/",Se={get:async c=>{try{const o=await fetch(`${_}${c}`);if(!o.ok)throw new Error(`API Error: ${o.status}`);return await o.json()}catch(o){throw console.error("API GET Error:",o),o}},post:async(c,o)=>{try{const a=o instanceof FormData,d=await fetch(`${_}${c}`,{method:"POST",headers:a?{}:{"Content-Type":"application/json"},body:a?o:JSON.stringify(o)});if(!d.ok)throw new Error(`API Error: ${d.status}`);return await d.json()}catch(a){throw console.error("API POST Error:",a),a}},put:async(c,o)=>{try{const a=await fetch(`${_}${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`API Error: ${a.status}`);return await a.json()}catch(a){throw console.error("API PUT Error:",a),a}}},Te=()=>{const c=ae(),o=l.useRef(null),a=l.useRef(null),d=l.useRef([]),[s,i]=l.useState({title:"",description:"",category:"pothole",location:null,photo:null,audioRecording:null}),[k,y]=l.useState(!1),[x,g]=l.useState(null),[n,b]=l.useState(1),[h,j]=l.useState(!1),[f,N]=l.useState(""),[R,U]=l.useState(!1),[Ce,S]=l.useState(null),[C,P]=l.useState(null),[F,z]=l.useState(!1),[v,O]=l.useState(!1),[A,B]=l.useState(null),[q,V]=l.useState(5),W=[{value:"pothole",label:"Road Maintenance",description:"Potholes, cracks, damaged pavement",icon:ne,color:"border-red-200 hover:border-red-300 focus-within:border-red-500"},{value:"garbage",label:"Waste Management",description:"Overflowing bins, illegal dumping",icon:oe,color:"border-yellow-200 hover:border-yellow-300 focus-within:border-yellow-500"},{value:"streetlight",label:"Street Lighting",description:"Broken lights, dark areas",icon:le,color:"border-blue-200 hover:border-blue-300 focus-within:border-blue-500"},{value:"water_leak",label:"Water Infrastructure",description:"Leaks, pipe bursts, drainage issues",icon:ie,color:"border-cyan-200 hover:border-cyan-300 focus-within:border-cyan-500"},{value:"other",label:"Other Issues",description:"Public safety, vandalism, other concerns",icon:ce,color:"border-gray-200 hover:border-gray-300 focus-within:border-gray-500"}],I=[{id:1,title:"Category",description:"What type of issue?"},{id:2,title:"Details",description:"Tell us more"},{id:3,title:"Location",description:"Where is it?"},{id:4,title:"Review",description:"Confirm & submit"}],G=async(t,r)=>{try{return`Lat: ${t.toFixed(4)}, Lng: ${r.toFixed(4)}`}catch(u){return console.error("Error fetching address:",u),`Lat: ${t.toFixed(4)}, Lng: ${r.toFixed(4)}`}},H=t=>{const r=t.target.files[0];if(r){const m=new FileReader;m.onload=u=>g(u.target.result),m.readAsDataURL(r),i(u=>({...u,photo:r}))}},J=async()=>{try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});a.current=new MediaRecorder(t),d.current=[],a.current.ondataavailable=r=>{d.current.push(r.data)},a.current.onstop=()=>{const r=new Blob(d.current,{type:"audio/wav"});S(r),P(URL.createObjectURL(r)),i(m=>({...m,audioRecording:r})),t.getTracks().forEach(m=>m.stop())},a.current.start(),U(!0)}catch(t){console.error("Error accessing microphone:",t),alert("Unable to access microphone. Please check your permissions.")}},K=()=>{a.current&&R&&(a.current.stop(),U(!1))},X=()=>{if(C){const t=new Audio(C);t.play(),z(!0),t.onended=()=>z(!1)}},Q=()=>{S(null),P(null),i(t=>({...t,audioRecording:null}))},Z=async t=>{i(m=>({...m,location:t}));const r=await G(t.lat,t.lng);N(r)};M.useEffect(()=>{if(h&&A){const t=setInterval(()=>{V(r=>r<=1?(clearInterval(t),c("/"),0):r-1)},1e3);return()=>clearInterval(t)}},[h,A,c]);const ee=async()=>{if(!s.location){alert("Please select a location on the map");return}if(!s.title.trim()){alert("Please enter a title for your report");return}y(!0);try{const t=new FormData;t.append("title",s.title),t.append("description",s.description),t.append("category",s.category),s.location&&t.append("location",JSON.stringify(s.location)),t.append("address",f),t.append("user_name","Anonymous"),s.photo&&t.append("photo",s.photo),s.audioRecording&&t.append("audio",s.audioRecording,"recording.wav");const r=await Se.post("/reports",t);if(r.data&&r.data.id)B(r.data.id),j(!0);else throw new Error("Invalid response from server. Report ID not found.");i({title:"",description:"",category:"pothole",location:null,photo:null,audioRecording:null}),g(null),N(""),S(null),P(null)}catch(t){console.error("Submit error details:",{message:t.message,stack:t.stack}),t.message.includes("Failed to fetch")?alert("Cannot connect to server. Please check if the backend is running on port 3001."):t.message.includes("API Error: 404")?alert("API endpoint not found. Please check your backend routes."):alert(`Failed to submit report: ${t.message}`)}finally{y(!1)}},te=()=>{n<4?b(n+1):ee()},se=()=>{n>1&&b(n-1)},re=()=>{switch(n){case 1:return s.category;case 2:return s.title.trim();case 3:return s.location;case 4:return!0;default:return!1}},$=()=>W.find(t=>t.value===s.category);return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(ue,{className:"w-8 h-8 text-green-600"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Your report has been submitted successfully. We'll review it and provide updates on the progress."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Report ID"}),e.jsxs("p",{className:"font-mono text-lg font-semibold text-gray-900",children:["RPT-",A]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Redirecting to home page in ",q," seconds..."]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>c("/"),className:"flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200",children:"Go Home Now"}),e.jsx("button",{onClick:()=>{j(!1),b(1),B(null),V(5),i({title:"",description:"",category:"pothole",location:null,photo:null,audioRecording:null}),g(null),N(""),S(null),P(null)},className:"flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:"Submit Another"})]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"font-semibold text-lg text-gray-900",children:"Submit Report"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Step ",n," of 4"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:I.map((t,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium transition-colors duration-200 ${n>=t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:t.id}),r<I.length-1&&e.jsx("div",{className:`w-12 h-1 mx-2 transition-colors duration-200 ${n>t.id?"bg-blue-600":"bg-gray-200"}`})]},t.id))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I[n-1]?.title}),e.jsx("p",{className:"text-sm text-gray-600",children:I[n-1]?.description})]})]})})}),e.jsx("div",{className:"max-w-2xl mx-auto p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 sm:p-8",children:[n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What type of issue are you reporting?"}),e.jsx("p",{className:"text-gray-600",children:"Select the category that best describes your concern"})]}),e.jsx("div",{className:"space-y-3",children:W.map(t=>{const r=t.icon;return e.jsxs("label",{className:`flex items-start p-4 rounded-xl cursor-pointer border-2 transition-all duration-200 ${s.category===t.value?"border-blue-500 bg-blue-50":t.color}`,children:[e.jsx("input",{type:"radio",name:"category",value:t.value,checked:s.category===t.value,onChange:m=>i(u=>({...u,category:m.target.value})),className:"sr-only"}),e.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[e.jsx("div",{className:`p-3 rounded-lg transition-colors duration-200 ${s.category===t.value?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(r,{className:`w-6 h-6 transition-colors duration-200 ${s.category===t.value?"text-blue-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]})]})]},t.value)})})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tell us about the issue"}),e.jsx("p",{className:"text-gray-600",children:"Provide details to help us understand and address the problem"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[M.createElement($()?.icon,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:$()?.label})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>i(r=>({...r,title:t.target.value})),placeholder:"Brief, clear description of the issue",className:"w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-colors duration-200 rounded-md",required:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:'Be specific and concise (e.g., "Large pothole on Main St near traffic light")'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Details"}),e.jsx("textarea",{value:s.description,onChange:t=>i(r=>({...r,description:t.target.value})),placeholder:"Any additional information that would help address this issue...",rows:4,className:"w-full px-3 py-2 border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-colors duration-200 rounded-md resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Photo Evidence"}),x?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-gray-200"}),e.jsx("button",{type:"button",onClick:()=>{g(null),i(t=>({...t,photo:null})),o.current&&(o.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors duration-200",children:e.jsx(L,{className:"w-4 h-4"})})]})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:H,capture:"environment",className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>o.current?.click(),className:"w-full p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors duration-200 text-center flex items-center justify-center space-x-2",children:[e.jsx(pe,{className:"w-6 h-6 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Capture a photo"})]}),e.jsxs("button",{type:"button",onClick:()=>o.current?.click(),className:"w-full p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors duration-200 text-center flex items-center justify-center space-x-2",children:[e.jsx(ke,{className:"w-6 h-6 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upload from gallery"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"PNG, JPG up to 10MB"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voice Note (Optional)"}),C?e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(T,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Voice note recorded"}),e.jsx("p",{className:"text-xs text-green-600",children:"Click play to review"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:X,disabled:F,className:"p-2 bg-green-100 text-green-600 rounded-full hover:bg-green-200 transition-colors duration-200 disabled:opacity-50",children:F?e.jsx(de,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:Q,className:"p-2 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition-colors duration-200",children:e.jsx(L,{className:"w-4 h-4"})})]})]})})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"button",onClick:R?K:J,className:`w-full p-4 border-2 border-dashed rounded-lg transition-all duration-200 text-center flex items-center justify-center space-x-2 ${R?"border-red-300 bg-red-50 hover:border-red-400":"border-gray-300 hover:border-gray-400"}`,children:R?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-6 h-6 text-red-600 animate-pulse"}),e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Stop Recording"})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-6 h-6 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Record voice note"})]})}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Optional: Add a voice description of the issue"})]})]})]})]}),n===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Where is this issue located?"}),e.jsx("p",{className:"text-gray-600",children:"Click on the map to pinpoint the exact location"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Select Location"}),e.jsx("button",{type:"button",onClick:()=>O(!v),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:v?e.jsx(ve,{className:"w-5 h-5"}):e.jsx(be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:`transition-all duration-300 ${v?"fixed inset-0 z-50 bg-white p-4":"relative"}`,children:[v&&e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Select Report Location"}),e.jsx("button",{onClick:()=>O(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsx(Re,{onLocationSelect:Z,initialLocation:s.location,isFullscreen:v})]})]}),s.location&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Location Selected"}),e.jsx("p",{className:"text-xs text-green-600",children:f})]})]})})]}),n===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Report"}),e.jsx("p",{className:"text-gray-600",children:"Please confirm all details are correct before submitting"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Issue Type"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[M.createElement($()?.icon,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:$()?.label})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Details"}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),x&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Photo"}),e.jsx("img",{src:x,alt:"Report",className:"w-24 h-24 object-cover rounded-lg"})]}),C&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Voice Note"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:"Voice recording attached"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-500 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-900",children:f})]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 sm:px-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:se,disabled:n===1,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),e.jsx("button",{onClick:te,disabled:!re()||k,className:"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):n===4?"Submit Report":"Continue"})]})})]})})]})};export{Te as default};
